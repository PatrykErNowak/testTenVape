"use strict";function setCookie(e,t,i){var o=new Date,i=(o.setTime(o.getTime()+24*i*60*60*1e3),"expires="+o.toUTCString());document.cookie=e+`=${t};${i};path=/`}function getCookie(e){var i=e+"=",o=document.cookie.split(";");for(let t=0;t<o.length;t++){let e=o[t];for(;" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(i))return e.substring(i.length,e.length)}return""}const showAgeVeryficationModal=function(){if("yes"!==getCookie("ageOver18")){const t=document.createElement("div");document.body.style.overflow="hidden",t.classList.add("modal-container"),t.innerHTML=`<div class="modal-age">
<div class="modal-age__content">
    <img class="modal-age__logo" src="./img/tenvape-logo-text.png" alt="">
    <p class="modal-age__text">Czy masz skończone 18 lat?</p>
    <div class="modal-age__btns">
        <button class="btn btn--confirm">Tak</button>
        <button class="btn btn--denied">Nie</button>
    </div>
    <p class="modal-age__text-small">Wchodząc na stronę naszego sklepu potwierdzasz, że jesteś osobą
        pełnoletnią.</p>
</div>
</div>`;const i=t.querySelector(".btn--confirm");var e=t.querySelector(".btn--denied");i.addEventListener("click",()=>{setCookie("ageOver18","yes",7),t.style.opacity=0,document.body.style.overflow="auto",setTimeout(()=>{i.closest(".modal-container").remove()},1e3)}),e.addEventListener("click",()=>{window.location.href="https://www.google.pl"}),document.body.append(t)}},cookiesModal=function(){if("yes"!==getCookie("cookies")){const e=document.createElement("div");e.classList.add("modal-cookies"),e.innerHTML=`<p class="modal-cookies__text">Ta strona wykorzystuje pliki cookie. Używamy informacji zapisanych za pomocą
  plików cookies w celu zapewnienia maksymalnej wygody w korzystaniu z naszego serwisu.</p><button class="modal-cookies__btn btn btn--confirm">Akceptuję</button>`,document.body.append(e);e.querySelector("button").addEventListener("click",function(){setCookie("cookies","yes",365),e.remove()})}},mobileNavigationHandler=function(){const e=document.querySelector(".hamburger"),t=document.querySelector(".navbar__menu");e.addEventListener("click",function(){t.classList.toggle("navbar__menu--active"),e.classList.toggle("is-active"),t.classList.contains("navbar__menu--active")?document.body.style.overflow="hidden":document.body.style.overflow="auto"})},displayFooterYear=function(){var e=document.querySelector(".footer__year"),t=(new Date).getFullYear();e.textContent=t},facebookMessenger=function(){var e,t,i,o=document.getElementById("fb-customer-chat");o.setAttribute("page_id","109763205136637"),o.setAttribute("attribution","biz_inbox"),window.fbAsyncInit=function(){FB.init({xfbml:!0,version:"v16.0"})},o=document,e="script",t="facebook-jssdk",i=o.getElementsByTagName(e)[0],o.getElementById(t)||((o=o.createElement(e)).id=t,o.src="https://connect.facebook.net/pl_PL/sdk/xfbml.customerchat.js",i.parentNode.insertBefore(o,i))},canvasBg=function(){const d=document.getElementById("canvas1"),o=d.getContext("2d");d.width=window.innerWidth,d.height=window.innerHeight;let c;const i={x:null,y:null,radius:d.height/220*(d.width/220)};window.addEventListener("mousemove",e=>{i.x=e.x,i.y=e.y});class r{constructor(e,t,i,o,n,s){this.x=e,this.y=t,this.directionX=i,this.directionY=o,this.size=n,this.color=s}draw(){o.beginPath(),o.arc(this.x,this.y,this.size,0,2*Math.PI,!1),o.fillStyle="#1cca59",o.fill()}update(){(this.x>d.width||this.x<0)&&(this.directionX=-this.directionX),(this.y>d.height||this.y<0)&&(this.directionY=-this.directionY);var e=i.x-this.x,t=i.y-this.y;Math.sqrt(e*e+t*t)<i.radius+this.size&&(i.x<this.x&&this.x<d.width-10*this.size&&(this.x+=10),i.x>this.x&&this.x>10*this.size&&(this.x-=10),i.y<this.y&&this.y<d.height-10*this.size&&(this.y+=10),i.y>this.y)&&this.y>10*this.size&&(this.y-=10),this.x+=this.directionX,this.y+=this.directionY,this.draw()}}function e(){c=[];var t=d.height*d.width/1e4;for(let e=0;e<t;e++){var i=5*Math.random()+1,o=Math.random()*(window.innerWidth-2*i-2*i)+2*i,n=Math.random()*(window.innerHeight-2*i-2*i)+2*i,s=.2*Math.random(),a=.2*Math.random();c.push(new r(o,n,s,a,i,"#1cca59"))}}function t(){requestAnimationFrame(t),o.clearRect(0,0,window.innerWidth,window.innerHeight);for(let e=0;e<c.length;e++)c[e].update();for(let t=0;t<c.length;t++)for(let e=0;e<c.length;e++){var i=(c[t].x-c[e].x)*(c[t].x-c[e].x)+(c[t].y-c[e].y)*(c[t].y-c[e].y);i<d.width/7*d.height/7&&(i=1-i/15e3,o.strokeStyle=`rgba(28, 202, 89,${i})`,o.lineWidth=1,o.beginPath(),o.moveTo(c[t].x,c[t].y),o.lineTo(c[e].x,c[e].y),o.stroke())}}window.addEventListener("resize",()=>{d.width=window.innerWidth,d.height=window.innerHeight,i.radius=d.height/220*(d.width/220),e()}),window.addEventListener("mouseout",()=>{i.x=void 0,i.y=void 0}),e(),t()},showMapIfLoaded=function(){const e=document.querySelector(".find-us__map");let t=!1;e.classList.add("find-us__map--unloaded"),e.addEventListener("load",()=>{e.classList.remove("find-us__map--unloaded"),e.style.animationDelay="0s",t=!0}),setTimeout(()=>{!1===t&&(e.src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d9990.243353479938!2d22.5520591!3d51.2455824!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x472257c6514cc25f%3A0x3cf1e3663a22bae7!2sTEN%20VAPE%20-%20VAPE%20SHOP%20LUBLIN!5e0!3m2!1spl!2spl!4v1677160856537!5m2!1spl!2spl")},1e3)};mobileNavigationHandler(),displayFooterYear(),facebookMessenger(),showAgeVeryficationModal(),cookiesModal(),canvasBg(),showMapIfLoaded();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbmQtdXMuanMiXSwibmFtZXMiOlsic2V0Q29va2llIiwiY25hbWUiLCJjdmFsdWUiLCJleGRheXMiLCJkIiwiRGF0ZSIsImV4cGlyZXMiLCJzZXRUaW1lIiwidG9VVENTdHJpbmciLCJjb29raWUiLCJnZXRDb29raWUiLCJsZXQiLCJuYW1lIiwiZG9jdW1lbnQiLCJzcGxpdCIsImNhIiwiaSIsImMiLCJzdWJzdHJpbmciLCJpbmRleE9mIiwibGVuZ3RoIiwic2hvd0FnZVZlcnlmaWNhdGlvbk1vZGFsIiwibW9kYWxDb250YWluZXIiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJjbGFzc0xpc3QiLCJpbm5lckhUTUwiLCJhZGQiLCJtb2RhbEhUTUwiLCJidG5EZW5pZWRBZ2UiLCJxdWVyeVNlbGVjdG9yIiwiYnRuQ29uZmlybUFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJib2R5Iiwib3ZlcmZsb3ciLCJzZXRUaW1lb3V0Iiwib3BhY2l0eSIsImNsb3Nlc3QiLCJyZW1vdmUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJhcHBlbmQiLCJjb29raWVzTW9kYWwiLCJtb2RhbCIsImJ0biIsImFjY2VwdENvb2tpZXMiLCJoYW1idXJnZXJFbCIsIm1vYmlsZU5hdmlnYXRpb25IYW5kbGVyIiwibmF2YmFyTWVudUVsIiwiZmFjZWJvb2tNZXNzZW5nZXIiLCJ0b2dnbGUiLCJkaXNwbGF5Rm9vdGVyWWVhciIsImNvbnRhaW5zIiwieWVhclNwYW4iLCJ0ZXh0Q29udGVudCIsImN1cnJlbnRZZWFyIiwiaW5pdCIsInhmYm1sIiwiZ2V0RnVsbFllYXIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImNhbnZhcyIsImhlaWdodCIsImdldEVsZW1lbnRCeUlkIiwiY2hhdGJveCIsInNldEF0dHJpYnV0ZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJGQiIsInZlcnNpb24iLCJzIiwicGFydGljbGVzQXJyYXkiLCJpZCIsImpzIiwic3JjIiwieCIsImZqcyIsIm1vdXNlIiwiY3R4IiwiZ2V0Q29udGV4dCIsIndpZHRoIiwiaW5uZXJXaWR0aCIsIlBhcnRpY2xlIiwiaW5uZXJIZWlnaHQiLCJkaXJlY3Rpb25ZIiwieSIsInJhZGl1cyIsImUiLCJiZWdpblBhdGgiLCJhcmMiLCJ1cGRhdGUiLCJkaXJlY3Rpb25YIiwic2l6ZSIsImNvbG9yIiwidGhpcyIsImRyYXciLCJkaXN0YW5jZSIsInNxcnQiLCJkeSIsImZpbGwiLCJkeCIsIm51bWJlck9mUGFydGljbGVzIiwiTWF0aCIsInB1c2giLCJiIiwib3BhY2l0eVZhbHVlIiwicmFuZG9tIiwibGluZVdpZHRoIiwibW92ZVRvIiwiYSIsIm1hcExvYWRlZCIsIm1hcCIsImFuaW1hdGUiLCJhbmltYXRpb25EZWxheSIsImNvbm5lY3QiLCJzdHJva2VTdHlsZSIsInVuZGVmaW5lZCIsImNhbnZhc0JnIiwic2hvd01hcElmTG9hZGVkIl0sIm1hcHBpbmdzIjoiYUFFQSxTQUFBQSxVQUFBQyxFQUFBQyxFQUFBQyxHQUdFLElBQU1DLEVBQUksSUFBSUMsS0FBZEMsR0FERkYsRUFBQUcsUUFBU1AsRUFBQUEsUUFBVUMsRUFBZUUsR0FBUkQsRUFBYyxHQUFFLEdBQUEsR0FBQSxFQUMxQkcsV0FBTUQsRUFBQUksWUFBQSxHQUNwQkosU0FBU0ssT0FBWVIsTUFBU0MsS0FBVUksVUFHMUMsQ0FBQSxTQUFBSSxVQUFBVCxHQUVBVSxJQUFBQyxFQUFTRixFQUFBQSxJQUNIRSxFQUFJQyxTQUFNWixPQUFRYSxNQUFBLEdBQUEsRUFDdEIsSUFBSUMsSUFBS0YsRUFBQUEsRUFBQUEsRUFBU0osRUFBQUEsT0FBYU8sQ0FBQSxHQUFJLENBQ25DTCxJQUFLTSxFQUFLRixFQUFHQyxHQUNYLEtBQWEsTUFBUkMsRUFBR0YsT0FBSyxDQUFBLEdBQ2JFLEVBQUFBLEVBQVFDLFVBQVUsQ0FBQSxFQUVsQixHQUFBLElBQUFELEVBQUFFLFFBQUFQLENBQUEsRUFDQSxPQUFNTyxFQUFBQSxVQUFhUCxFQUFNUSxPQUFFSCxFQUFBRyxNQUFBLENBRzdC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QUEsQ0FqQ0UsQ0FBQyxFQUVEN0QsRUFBSSxFQUNKdUQsRUFBTyxDQUNULEVBRU1NLGdCQUFrQixXQUN0QixNQUFNUCxFQUFNbEcsU0FBU2lCLGNBQWMsZUFBZSxFQUNsRG5CLElBQUltRyxFQUFZLENBQUEsRUFFaEJDLEVBQUl0RixVQUFVRSxJQUFJLHdCQUF3QixFQUMxQ29GLEVBQUkvRSxpQkFBaUIsT0FBUSxLQUMzQitFLEVBQUl0RixVQUFVYSxPQUFPLHdCQUF3QixFQUM3Q3lFLEVBQUl2RixNQUFNeUYsZUFBaUIsS0FDM0JILEVBQVksQ0FBQSxDQUNkLENBQUMsRUFFRDNFLFdBQVcsS0FDUyxDQUFBLElBQWQyRSxJQUNGQyxFQUFJckMsSUFDRixxUUFDTixFQUFHLEdBQUksQ0FDVCxFQUdBMUIsd0JBQXVCLEVBQ3ZCSSxrQkFBaUIsRUFDakJGLGtCQUFpQixFQUNqQjdCLHlCQUF3QixFQUN4QnNCLGFBQVksRUFHWjBFLFNBQVEsRUFDUkMsZ0JBQWUiLCJmaWxlIjoiZmluZC11cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItY29uc3QgKi9cclxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tO1xyXG5cclxuZnVuY3Rpb24gc2V0Q29va2llKGNuYW1lLCBjdmFsdWUsIGV4ZGF5cykge1xyXG4gIGNvbnN0IGQgPSBuZXcgRGF0ZSgpO1xyXG4gIGQuc2V0VGltZShkLmdldFRpbWUoKSArIGV4ZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG4gIGxldCBleHBpcmVzID0gYGV4cGlyZXM9JHtkLnRvVVRDU3RyaW5nKCl9YDtcclxuICBkb2N1bWVudC5jb29raWUgPSBgJHtjbmFtZX09JHtjdmFsdWV9OyR7ZXhwaXJlc307cGF0aD0vYDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29va2llKGNuYW1lKSB7XHJcbiAgbGV0IG5hbWUgPSBgJHtjbmFtZX09YDtcclxuICBsZXQgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgYyA9IGNhW2ldO1xyXG4gICAgd2hpbGUgKGMuY2hhckF0KDApID09PSAnICcpIHtcclxuICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xyXG4gICAgfVxyXG4gICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuICcnO1xyXG59XHJcblxyXG5jb25zdCBzaG93QWdlVmVyeWZpY2F0aW9uTW9kYWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgLy8gQ2hlY2sgQ29va2llXHJcbiAgaWYgKGdldENvb2tpZSgnYWdlT3ZlcjE4JykgPT09ICd5ZXMnKSByZXR1cm47XHJcblxyXG4gIC8vIENyZWF0aW5nICYgQWRkIG1vZGFsXHJcbiAgY29uc3QgbW9kYWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBjb25zdCBtb2RhbEhUTUwgPSBgPGRpdiBjbGFzcz1cIm1vZGFsLWFnZVwiPlxyXG48ZGl2IGNsYXNzPVwibW9kYWwtYWdlX19jb250ZW50XCI+XHJcbiAgICA8aW1nIGNsYXNzPVwibW9kYWwtYWdlX19sb2dvXCIgc3JjPVwiLi9pbWcvdGVudmFwZS1sb2dvLXRleHQucG5nXCIgYWx0PVwiXCI+XHJcbiAgICA8cCBjbGFzcz1cIm1vZGFsLWFnZV9fdGV4dFwiPkN6eSBtYXN6IHNrb8WEY3pvbmUgMTggbGF0PzwvcD5cclxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1hZ2VfX2J0bnNcIj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tY29uZmlybVwiPlRhazwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1kZW5pZWRcIj5OaWU8L2J1dHRvbj5cclxuICAgIDwvZGl2PlxyXG4gICAgPHAgY2xhc3M9XCJtb2RhbC1hZ2VfX3RleHQtc21hbGxcIj5XY2hvZHrEhWMgbmEgc3Ryb27EmSBuYXN6ZWdvIHNrbGVwdSBwb3R3aWVyZHphc3osIMW8ZSBqZXN0ZcWbIG9zb2LEhVxyXG4gICAgICAgIHBlxYJub2xldG5pxIUuPC9wPlxyXG48L2Rpdj5cclxuPC9kaXY+YDtcclxuXHJcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gIG1vZGFsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ21vZGFsLWNvbnRhaW5lcicpO1xyXG4gIG1vZGFsQ29udGFpbmVyLmlubmVySFRNTCA9IG1vZGFsSFRNTDtcclxuXHJcbiAgLy8gTW9kYWwgYmVoYXZpb3JcclxuICBjb25zdCBidG5Db25maXJtQWdlID0gbW9kYWxDb250YWluZXIucXVlcnlTZWxlY3RvcignLmJ0bi0tY29uZmlybScpO1xyXG4gIGNvbnN0IGJ0bkRlbmllZEFnZSA9IG1vZGFsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5idG4tLWRlbmllZCcpO1xyXG5cclxuICBidG5Db25maXJtQWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgc2V0Q29va2llKCdhZ2VPdmVyMTgnLCAneWVzJywgNyk7XHJcbiAgICBtb2RhbENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgYnRuQ29uZmlybUFnZS5jbG9zZXN0KCcubW9kYWwtY29udGFpbmVyJykucmVtb3ZlKCk7XHJcbiAgICB9LCAxMDAwKTtcclxuICB9KTtcclxuXHJcbiAgYnRuRGVuaWVkQWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLnBsJztcclxuICB9KTtcclxuXHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmQobW9kYWxDb250YWluZXIpO1xyXG59O1xyXG5cclxuY29uc3QgY29va2llc01vZGFsID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vIENoZWNrIGNvb2tpZXNcclxuICBpZiAoZ2V0Q29va2llKCdjb29raWVzJykgPT09ICd5ZXMnKSByZXR1cm47XHJcblxyXG4gIC8vIENyZWF0ZSBtb2RhbFxyXG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsLWNvb2tpZXMnKTtcclxuICBtb2RhbC5pbm5lckhUTUwgPSBgPHAgY2xhc3M9XCJtb2RhbC1jb29raWVzX190ZXh0XCI+VGEgc3Ryb25hIHd5a29yenlzdHVqZSBwbGlraSBjb29raWUuIFXFvHl3YW15IGluZm9ybWFjamkgemFwaXNhbnljaCB6YSBwb21vY8SFXHJcbiAgcGxpa8OzdyBjb29raWVzIHcgY2VsdSB6YXBld25pZW5pYSBtYWtzeW1hbG5laiB3eWdvZHkgdyBrb3J6eXN0YW5pdSB6IG5hc3plZ28gc2Vyd2lzdS48L3A+PGJ1dHRvbiBjbGFzcz1cIm1vZGFsLWNvb2tpZXNfX2J0biBidG4gYnRuLS1jb25maXJtXCI+QWtjZXB0dWrEmTwvYnV0dG9uPmA7XHJcblxyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kKG1vZGFsKTtcclxuXHJcbiAgLy8gTW9kYWwgQmVoYXZpb3JcclxuICBjb25zdCBidG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTtcclxuXHJcbiAgY29uc3QgYWNjZXB0Q29va2llcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHNldENvb2tpZSgnY29va2llcycsICd5ZXMnLCAzNjUpO1xyXG4gICAgbW9kYWwucmVtb3ZlKCk7XHJcbiAgfTtcclxuXHJcbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWNjZXB0Q29va2llcyk7XHJcbn07XHJcblxyXG4vLyBOYXZpZ2F0aW9uIGhhbmRsaW5nO1xyXG5jb25zdCBtb2JpbGVOYXZpZ2F0aW9uSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBoYW1idXJnZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW1idXJnZXInKTtcclxuICBjb25zdCBuYXZiYXJNZW51RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyX19tZW51Jyk7XHJcblxyXG4gIGNvbnN0IG1vYmlsZU1lbnVIYW5kbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBuYXZiYXJNZW51RWwuY2xhc3NMaXN0LnRvZ2dsZSgnbmF2YmFyX19tZW51LS1hY3RpdmUnKTtcclxuICAgIGhhbWJ1cmdlckVsLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgaWYgKG5hdmJhck1lbnVFbC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdmJhcl9fbWVudS0tYWN0aXZlJykpIHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBoYW1idXJnZXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1vYmlsZU1lbnVIYW5kbGUpO1xyXG59O1xyXG5cclxuLy8gRGlzcGxheSBmb290ZXIgeWVhclxyXG5jb25zdCBkaXNwbGF5Rm9vdGVyWWVhciA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCB5ZWFyU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX3llYXInKTtcclxuICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgeWVhclNwYW4udGV4dENvbnRlbnQgPSBjdXJyZW50WWVhcjtcclxufTtcclxuXHJcbi8vIEZhY2Vib29rIG1lc3NlbmdlclxyXG5jb25zdCBmYWNlYm9va01lc3NlbmdlciA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBjaGF0Ym94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZiLWN1c3RvbWVyLWNoYXQnKTtcclxuICBjaGF0Ym94LnNldEF0dHJpYnV0ZSgncGFnZV9pZCcsICcxMDk3NjMyMDUxMzY2MzcnKTtcclxuICBjaGF0Ym94LnNldEF0dHJpYnV0ZSgnYXR0cmlidXRpb24nLCAnYml6X2luYm94Jyk7XHJcblxyXG4gIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIEZCLmluaXQoe1xyXG4gICAgICB4ZmJtbDogdHJ1ZSxcclxuICAgICAgdmVyc2lvbjogJ3YxNi4wJyxcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIChmdW5jdGlvbiAoZCwgcywgaWQpIHtcclxuICAgIGxldCBqcztcclxuICAgIGNvbnN0IGZqcyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF07XHJcbiAgICBpZiAoZC5nZXRFbGVtZW50QnlJZChpZCkpIHJldHVybjtcclxuICAgIGpzID0gZC5jcmVhdGVFbGVtZW50KHMpO1xyXG4gICAganMuaWQgPSBpZDtcclxuICAgIGpzLnNyYyA9ICdodHRwczovL2Nvbm5lY3QuZmFjZWJvb2submV0L3BsX1BML3Nkay94ZmJtbC5jdXN0b21lcmNoYXQuanMnO1xyXG4gICAgZmpzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGpzLCBmanMpO1xyXG4gIH0pKGRvY3VtZW50LCAnc2NyaXB0JywgJ2ZhY2Vib29rLWpzc2RrJyk7XHJcbn07XHJcblxyXG4vLyAhIENhbnZhc1xyXG5jb25zdCBjYW52YXNCZyA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzMScpO1xyXG5cclxuICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgbGV0IHBhcnRpY2xlc0FycmF5O1xyXG5cclxuICAvLyBnZXQgbW91c2UgcG9zaXRpb25cclxuICBjb25zdCBtb3VzZSA9IHtcclxuICAgIHg6IG51bGwsXHJcbiAgICB5OiBudWxsLFxyXG4gICAgcmFkaXVzOiAoY2FudmFzLmhlaWdodCAvIDIyMCkgKiAoY2FudmFzLndpZHRoIC8gMjIwKSxcclxuICB9O1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHtcclxuICAgIG1vdXNlLnggPSBlLng7XHJcbiAgICBtb3VzZS55ID0gZS55O1xyXG4gIH0pO1xyXG5cclxuICAvLyBjcmVhdGUgcGFydGljbGVcclxuXHJcbiAgY2xhc3MgUGFydGljbGUge1xyXG4gICAgY29uc3RydWN0b3IoeCwgeSwgZGlyZWN0aW9uWCwgZGlyZWN0aW9uWSwgc2l6ZSwgY29sb3IpIHtcclxuICAgICAgdGhpcy54ID0geDtcclxuICAgICAgdGhpcy55ID0geTtcclxuICAgICAgdGhpcy5kaXJlY3Rpb25YID0gZGlyZWN0aW9uWDtcclxuICAgICAgdGhpcy5kaXJlY3Rpb25ZID0gZGlyZWN0aW9uWTtcclxuICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG1ldGhvZCB0byBkcmF3IGluZGl2aWR1YWwgcGFydGljbGVcclxuICAgIGRyYXcoKSB7XHJcbiAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgY3R4LmFyYyh0aGlzLngsIHRoaXMueSwgdGhpcy5zaXplLCAwLCBNYXRoLlBJICogMiwgZmFsc2UpO1xyXG4gICAgICBjdHguZmlsbFN0eWxlID0gJyMxY2NhNTknO1xyXG4gICAgICBjdHguZmlsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIHBhcnRpY2xlIHBvc2l0aW9uLCBjaGVjayBtb3VzZSBwb3NpdGlvbiwgbW92ZSB0aGUgcGFydGljbGUsIGRyYXcgdGhlIHBhcnRpY2xlXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgIC8vIGNoZWNrIGlmICBwYXJ0aWNsZSBpcyBzdGlsbCB3aXRoaW4gY2FudmFzXHJcbiAgICAgIGlmICh0aGlzLnggPiBjYW52YXMud2lkdGggfHwgdGhpcy54IDwgMCkge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uWCA9IC10aGlzLmRpcmVjdGlvblg7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMueSA+IGNhbnZhcy5oZWlnaHQgfHwgdGhpcy55IDwgMCkge1xyXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uWSA9IC10aGlzLmRpcmVjdGlvblk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNoZWNrIGNvbGxpc2lvbiBkZXRlY3Rpb24gLSBtb3VzZSBwb3NpdGlvbiAvIHBhcnRpY2xlIHBvc2l0aW9uXHJcbiAgICAgIGNvbnN0IGR4ID0gbW91c2UueCAtIHRoaXMueDtcclxuICAgICAgY29uc3QgZHkgPSBtb3VzZS55IC0gdGhpcy55O1xyXG4gICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcbiAgICAgIGlmIChkaXN0YW5jZSA8IG1vdXNlLnJhZGl1cyArIHRoaXMuc2l6ZSkge1xyXG4gICAgICAgIGlmIChtb3VzZS54IDwgdGhpcy54ICYmIHRoaXMueCA8IGNhbnZhcy53aWR0aCAtIHRoaXMuc2l6ZSAqIDEwKSB7XHJcbiAgICAgICAgICB0aGlzLnggKz0gMTA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb3VzZS54ID4gdGhpcy54ICYmIHRoaXMueCA+IHRoaXMuc2l6ZSAqIDEwKSB7XHJcbiAgICAgICAgICB0aGlzLnggLT0gMTA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtb3VzZS55IDwgdGhpcy55ICYmIHRoaXMueSA8IGNhbnZhcy5oZWlnaHQgLSB0aGlzLnNpemUgKiAxMCkge1xyXG4gICAgICAgICAgdGhpcy55ICs9IDEwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobW91c2UueSA+IHRoaXMueSAmJiB0aGlzLnkgPiB0aGlzLnNpemUgKiAxMCkge1xyXG4gICAgICAgICAgdGhpcy55IC09IDEwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gbW92ZSBwYXJ0aWNsZVxyXG4gICAgICB0aGlzLnggKz0gdGhpcy5kaXJlY3Rpb25YO1xyXG4gICAgICB0aGlzLnkgKz0gdGhpcy5kaXJlY3Rpb25ZO1xyXG5cclxuICAgICAgLy8gZHJhdyBwYXJ0aWNsZVxyXG4gICAgICB0aGlzLmRyYXcoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIGNyZWF0ZSBwYXJ0aWNsZSBhcnJheVxyXG4gIGNvbnN0IGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBwYXJ0aWNsZXNBcnJheSA9IFtdO1xyXG4gICAgY29uc3QgbnVtYmVyT2ZQYXJ0aWNsZXMgPSAoY2FudmFzLmhlaWdodCAqIGNhbnZhcy53aWR0aCkgLyAxMDAwMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZQYXJ0aWNsZXM7IGkrKykge1xyXG4gICAgICBjb25zdCBzaXplID0gTWF0aC5yYW5kb20oKSAqIDUgKyAxO1xyXG4gICAgICBjb25zdCB4ID1cclxuICAgICAgICBNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5pbm5lcldpZHRoIC0gc2l6ZSAqIDIgLSBzaXplICogMikgKyBzaXplICogMjtcclxuICAgICAgY29uc3QgeSA9XHJcbiAgICAgICAgTWF0aC5yYW5kb20oKSAqICh3aW5kb3cuaW5uZXJIZWlnaHQgLSBzaXplICogMiAtIHNpemUgKiAyKSArIHNpemUgKiAyO1xyXG4gICAgICBjb25zdCBkaXJlY3Rpb25YID0gTWF0aC5yYW5kb20oKSAqIDAuMjtcclxuICAgICAgY29uc3QgZGlyZWN0aW9uWSA9IE1hdGgucmFuZG9tKCkgKiAwLjI7XHJcbiAgICAgIGNvbnN0IGNvbG9yID0gJyMxY2NhNTknO1xyXG5cclxuICAgICAgcGFydGljbGVzQXJyYXkucHVzaChcclxuICAgICAgICBuZXcgUGFydGljbGUoeCwgeSwgZGlyZWN0aW9uWCwgZGlyZWN0aW9uWSwgc2l6ZSwgY29sb3IpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gY2hlY2sgaWYgcGFydGljbGVzIGFyZSBjbG9zZSBlbm91Z2ggdG8gZHJhdyBsaW5lIGJldHdlZW4gdGhlbVxyXG5cclxuICBjb25zdCBjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IG9wYWNpdHlWYWx1ZSA9IDE7XHJcbiAgICBmb3IgKGxldCBhID0gMDsgYSA8IHBhcnRpY2xlc0FycmF5Lmxlbmd0aDsgYSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGIgPSAwOyBiIDwgcGFydGljbGVzQXJyYXkubGVuZ3RoOyBiKyspIHtcclxuICAgICAgICBjb25zdCBkaXN0YW5jZSA9XHJcbiAgICAgICAgICAocGFydGljbGVzQXJyYXlbYV0ueCAtIHBhcnRpY2xlc0FycmF5W2JdLngpICpcclxuICAgICAgICAgICAgKHBhcnRpY2xlc0FycmF5W2FdLnggLSBwYXJ0aWNsZXNBcnJheVtiXS54KSArXHJcbiAgICAgICAgICAocGFydGljbGVzQXJyYXlbYV0ueSAtIHBhcnRpY2xlc0FycmF5W2JdLnkpICpcclxuICAgICAgICAgICAgKHBhcnRpY2xlc0FycmF5W2FdLnkgLSBwYXJ0aWNsZXNBcnJheVtiXS55KTtcclxuICAgICAgICBpZiAoZGlzdGFuY2UgPCAoKGNhbnZhcy53aWR0aCAvIDcpICogY2FudmFzLmhlaWdodCkgLyA3KSB7XHJcbiAgICAgICAgICBvcGFjaXR5VmFsdWUgPSAxIC0gZGlzdGFuY2UgLyAxNTAwMDtcclxuICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGByZ2JhKDI4LCAyMDIsIDg5LCR7b3BhY2l0eVZhbHVlfSlgO1xyXG4gICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICBjdHgubW92ZVRvKHBhcnRpY2xlc0FycmF5W2FdLngsIHBhcnRpY2xlc0FycmF5W2FdLnkpO1xyXG4gICAgICAgICAgY3R4LmxpbmVUbyhwYXJ0aWNsZXNBcnJheVtiXS54LCBwYXJ0aWNsZXNBcnJheVtiXS55KTtcclxuICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBhbmltYXRpb24gbG9vcFxyXG5cclxuICBjb25zdCBhbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRpY2xlc0FycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHBhcnRpY2xlc0FycmF5W2ldLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgY29ubmVjdCgpO1xyXG4gIH07XHJcblxyXG4gIC8vIHJlc2l6ZSBldmVudFxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICBtb3VzZS5yYWRpdXMgPSAoY2FudmFzLmhlaWdodCAvIDIyMCkgKiAoY2FudmFzLndpZHRoIC8gMjIwKTtcclxuICAgIGluaXQoKTtcclxuICB9KTtcclxuXHJcbiAgLy8gbW91c2Ugb3V0IGV2ZW50XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xyXG4gICAgbW91c2UueCA9IHVuZGVmaW5lZDtcclxuICAgIG1vdXNlLnkgPSB1bmRlZmluZWQ7XHJcbiAgfSk7XHJcblxyXG4gIGluaXQoKTtcclxuICBhbmltYXRlKCk7XHJcbn07XHJcblxyXG5jb25zdCBzaG93TWFwSWZMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgbWFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbmQtdXNfX21hcCcpO1xyXG4gIGxldCBtYXBMb2FkZWQgPSBmYWxzZTtcclxuXHJcbiAgbWFwLmNsYXNzTGlzdC5hZGQoJ2ZpbmQtdXNfX21hcC0tdW5sb2FkZWQnKTtcclxuICBtYXAuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcclxuICAgIG1hcC5jbGFzc0xpc3QucmVtb3ZlKCdmaW5kLXVzX19tYXAtLXVubG9hZGVkJyk7XHJcbiAgICBtYXAuc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSAnMHMnO1xyXG4gICAgbWFwTG9hZGVkID0gdHJ1ZTtcclxuICB9KTtcclxuXHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBpZiAobWFwTG9hZGVkID09PSBmYWxzZSlcclxuICAgICAgbWFwLnNyYyA9XHJcbiAgICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vbWFwcy9lbWJlZD9wYj0hMW0xNCExbTghMW0zITFkOTk5MC4yNDMzNTM0Nzk5MzghMmQyMi41NTIwNTkxITNkNTEuMjQ1NTgyNCEzbTIhMWkxMDI0ITJpNzY4ITRmMTMuMSEzbTMhMW0yITFzMHg0NzIyNTdjNjUxNGNjMjVmJTNBMHgzY2YxZTM2NjNhMjJiYWU3ITJzVEVOJTIwVkFQRSUyMC0lMjBWQVBFJTIwU0hPUCUyMExVQkxJTiE1ZTAhM20yITFzcGwhMnNwbCE0djE2NzcxNjA4NTY1MzchNW0yITFzcGwhMnNwbCc7XHJcbiAgfSwgMTAwMCk7XHJcbn07XHJcblxyXG4vLyBNYWluIGZ1bmN0aW9uc1xyXG5tb2JpbGVOYXZpZ2F0aW9uSGFuZGxlcigpO1xyXG5kaXNwbGF5Rm9vdGVyWWVhcigpO1xyXG5mYWNlYm9va01lc3NlbmdlcigpO1xyXG5zaG93QWdlVmVyeWZpY2F0aW9uTW9kYWwoKTtcclxuY29va2llc01vZGFsKCk7XHJcblxyXG4vLyBTZWNvbmRhcnkgZnVuY3Rpb25zXHJcbmNhbnZhc0JnKCk7XHJcbnNob3dNYXBJZkxvYWRlZCgpO1xyXG4iXX0=
