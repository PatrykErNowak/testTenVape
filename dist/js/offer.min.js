"use strict";function setCookie(e,t,o){var n=new Date,o=(n.setTime(n.getTime()+24*o*60*60*1e3),"expires="+n.toUTCString());document.cookie=e+`=${t};${o};path=/`}function getCookie(e){var o=e+"=",n=document.cookie.split(";");for(let t=0;t<n.length;t++){let e=n[t];for(;" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(o))return e.substring(o.length,e.length)}return""}const showAgeVeryficationModal=function(){if("yes"!==getCookie("ageOver18")){const t=document.createElement("div");document.body.style.overflow="hidden",t.classList.add("modal-container"),t.innerHTML=`<div class="modal-age">
<div class="modal-age__content">
    <img class="modal-age__logo" src="./img/tenvape-logo-text.png" alt="">
    <p class="modal-age__text">Czy masz skończone 18 lat?</p>
    <div class="modal-age__btns">
        <button class="btn btn--confirm">Tak</button>
        <button class="btn btn--denied">Nie</button>
    </div>
    <p class="modal-age__text-small">Wchodząc na stronę naszego sklepu potwierdzasz, że jesteś osobą
        pełnoletnią.</p>
</div>
</div>`;const o=t.querySelector(".btn--confirm");var e=t.querySelector(".btn--denied");o.addEventListener("click",()=>{setCookie("ageOver18","yes",7),t.style.opacity=0,document.body.style.overflow="auto",setTimeout(()=>{o.closest(".modal-container").remove()},1e3)}),e.addEventListener("click",()=>{window.location.href="https://www.google.pl"}),document.body.append(t)}},cookiesModal=function(){if("yes"!==getCookie("cookies")){const e=document.createElement("div");e.classList.add("modal-cookies"),e.innerHTML=`<p class="modal-cookies__text">Ta strona wykorzystuje pliki cookie. Używamy informacji zapisanych za pomocą
  plików cookies w celu zapewnienia maksymalnej wygody w korzystaniu z naszego serwisu.</p><button class="modal-cookies__btn btn btn--confirm">Akceptuję</button>`,document.body.append(e);e.querySelector("button").addEventListener("click",function(){setCookie("cookies","yes",365),e.remove()})}},mobileNavigationHandler=function(){const e=document.querySelector(".hamburger"),t=document.querySelector(".navbar__menu");e.addEventListener("click",function(){t.classList.toggle("navbar__menu--active"),e.classList.toggle("is-active"),t.classList.contains("navbar__menu--active")?document.body.style.overflow="hidden":document.body.style.overflow="auto"})},displayFooterYear=function(){var e=document.querySelector(".footer__year"),t=(new Date).getFullYear();e.textContent=t},facebookMessenger=function(){var e,t,o,n=document.getElementById("fb-customer-chat");n.setAttribute("page_id","109763205136637"),n.setAttribute("attribution","biz_inbox"),window.fbAsyncInit=function(){FB.init({xfbml:!0,version:"v16.0"})},n=document,e="script",t="facebook-jssdk",o=n.getElementsByTagName(e)[0],n.getElementById(t)||((n=n.createElement(e)).id=t,n.src="https://connect.facebook.net/pl_PL/sdk/xfbml.customerchat.js",o.parentNode.insertBefore(n,o))},scrollToTop=function(){const t=document.querySelector(".btn__scroll-to-top");var e=document.querySelector("header");new IntersectionObserver(function(e){var[e]=e;e.isIntersecting?t.classList.remove("active"):t.classList.add("active")},{root:null,threshold:.3}).observe(e),t.addEventListener("click",function(){document.documentElement.scrollTo({top:0})})},mobileScreen=window.innerWidth<768,categorySlider=function(){var e=document.querySelector(".categories__content");function t(){o.forEach(e=>{e.classList.remove("category--active"),mobileScreen&&(e.style.maxHeight="150px")})}const o=e.querySelectorAll(".category");e.addEventListener("click",e=>{e=e.target.closest(".category");t(),e.classList.contains("category--active")&&mobileScreen?(e.style.maxHeight="150px",e.classList.remove("category--active")):e&&(e.classList.add("category--active"),mobileScreen)&&(e.style.maxHeight=e.scrollHeight+"px")}),document.body.addEventListener("click",e=>{e.target?.closest(".categories__content")||t()})},scrollToCategoryOfProducts=function(){const o=document.querySelector(".products");document.querySelector(".categories").addEventListener("click",e=>{var t;e.target.classList.contains("category__btn")&&(e=e.target.closest(".category").dataset["category"],e=o.querySelector(`[data-category="${e}"]`),t=document.querySelector(".navbar").getBoundingClientRect().height,window.scrollTo({top:e.offsetTop-+t,behavior:"smooth"}))})},sectionAnimationHandle=function(){if(!mobileScreen){var e=document.querySelector(".categories"),t=document.querySelectorAll(".products__category"),o=new IntersectionObserver(function(e,t){var[e]=e;e.isIntersecting&&(e.target.classList.add("section--anime"),t.unobserve(e.target))},{root:null,rootMargin:"0px",threshold:.45});const n=new IntersectionObserver(function(e,t){var[e]=e;e.isIntersecting&&(e.target.classList.remove("section--hidden"),t.unobserve(e.target))},{root:null,rootMargin:"0px",threshold:.15});t.forEach(e=>{e.classList.add("section--hidden"),n.observe(e)}),o.observe(e)}},cardHoverMobile=function(){!function(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?!0:e}()||document.querySelectorAll(".card").forEach(e=>{e.addEventListener("click",e=>{e.target.closest(".card").classList.toggle("active")})})};mobileNavigationHandler(),displayFooterYear(),facebookMessenger(),scrollToTop(),showAgeVeryficationModal(),cookiesModal(),categorySlider(),scrollToCategoryOfProducts(),sectionAnimationHandle(),cardHoverMobile();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9mZmVyLmpzIl0sIm5hbWVzIjpbInNldENvb2tpZSIsImNuYW1lIiwiY3ZhbHVlIiwiZXhkYXlzIiwiZCIsIkRhdGUiLCJleHBpcmVzIiwic2V0VGltZSIsInRvVVRDU3RyaW5nIiwiY29va2llIiwiZ2V0Q29va2llIiwibGV0IiwibmFtZSIsImRvY3VtZW50Iiwic3BsaXQiLCJjYSIsImkiLCJjIiwic3Vic3RyaW5nIiwiaW5kZXhPZiIsImxlbmd0aCIsInNob3dBZ2VWZXJ5ZmljYXRpb25Nb2RhbCIsIm1vZGFsQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiY2xhc3NMaXN0IiwiaW5uZXJIVE1MIiwiYWRkIiwibW9kYWxIVE1MIiwiYnRuRGVuaWVkQWdlIiwicXVlcnlTZWxlY3RvciIsImJ0bkNvbmZpcm1BZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiYm9keSIsIm92ZXJmbG93Iiwic2V0VGltZW91dCIsIm9wYWNpdHkiLCJjbG9zZXN0IiwicmVtb3ZlIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiYXBwZW5kIiwiY29va2llc01vZGFsIiwibW9kYWwiLCJidG4iLCJhY2NlcHRDb29raWVzIiwibmF2YmFyTWVudUVsIiwibW9iaWxlTWVudUhhbmRsZSIsImhhbWJ1cmdlckVsIiwiZmFjZWJvb2tNZXNzZW5nZXIiLCJ0b2dnbGUiLCJkaXNwbGF5Rm9vdGVyWWVhciIsImNvbnRhaW5zIiwieWVhclNwYW4iLCJ0ZXh0Q29udGVudCIsImN1cnJlbnRZZWFyIiwiaW5pdCIsInhmYm1sIiwiZ2V0RnVsbFllYXIiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm1haW5Db250ZW50IiwiaWQiLCJmanMiLCJnZXRFbGVtZW50QnlJZCIsImNoYXRib3giLCJzZXRBdHRyaWJ1dGUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiRkIiLCJ2ZXJzaW9uIiwicyIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJqcyIsInNjcm9sbFRvVG9wIiwic2Nyb2xsVG9Ub3BIYW5kbGUiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUbyIsIkludGVyc2VjdGlvbk9ic2VydmVyIiwiZW50cmllcyIsInJvb3QiLCJ0aHJlc2hvbGQiLCJjYXRlZ29yeUNvbnRhaW5lciIsImNhdGVnb3J5QmFySGVpZ2h0IiwidG9wIiwicmVtb3ZlQWN0aXZlQ2xhc3MiLCJpbm5lcldpZHRoIiwiY2F0ZWdvcnlTbGlkZXIiLCJjYXRlZ29yeVRhcmdldCIsImNhdGVnb3J5SXRlbXMiLCJmb3JFYWNoIiwiY2F0IiwibW9iaWxlU2NyZWVuIiwibWF4SGVpZ2h0IiwiZSIsInNjcm9sbFRvQ2F0ZWdvcnlPZlByb2R1Y3RzIiwiY2F0TGlua3NDb250YWluZXIiLCJjYXRlZ29yeSIsInRhcmdldCIsInByb2R1Y3RzQ29udGFpbmVyIiwic2Nyb2xsSGVpZ2h0IiwicXVlcnlTZWxlY3RvckFsbCIsInNob3dDYXRlZ29yaWVzIiwib2JzZXJ2ZXIiLCJ1bm9ic2VydmUiLCJkYXRhc2V0Iiwic2VjdGlvbiIsImNhdE9wdGlvbnMiLCJvZmZzZXRUb3AiLCJuYXZIZWlnaHQiLCJiZWhhdmlvciIsInJvb3RNYXJnaW4iLCJzZWN0aW9uQW5pbWF0aW9uSGFuZGxlIiwib2JzZXJ2ZVByb2R1Y3RzIiwic2hvd1Byb2R1Y3RzIiwicHJvZHVjdHMiLCJvYnNlcnZlIiwiY2FyZEhvdmVyTW9iaWxlIiwibW9iaWxlQW5kVGFibGV0Q2hlY2siLCJjaGVjayIsImNhcmRzIiwibW9iaWxlTmF2aWdhdGlvbkhhbmRsZXIiLCJvYnNlcnZlQ2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidmVuZG9yIiwib3BlcmEiLCJ0ZXN0Iiwic3Vic3RyIiwiY2FyZCJdLCJtYXBwaW5ncyI6ImFBSUEsU0FBU0EsVUFBVUMsRUFBT0MsRUFBUUMsR0FEbEMsSUFBQUMsRUFBQSxJQUFBQyxLQUVFQyxHQURGRixFQUFBRyxRQUFTUCxFQUFBQSxRQUFVQyxFQUFlRSxHQUFSRCxFQUFj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QixhQUFZLEVBR1o2QyxlQUFjLEVBQ2RRLDJCQUEwQixFQUMxQmlCLHVCQUFzQixFQUN0QkssZ0JBQWUiLCJmaWxlIjoib2ZmZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLWNvbnN0ICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS07XHJcbmZ1bmN0aW9uIHNldENvb2tpZShjbmFtZSwgY3ZhbHVlLCBleGRheXMpIHtcclxuICBjb25zdCBkID0gbmV3IERhdGUoKTtcclxuICBkLnNldFRpbWUoZC5nZXRUaW1lKCkgKyBleGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICBsZXQgZXhwaXJlcyA9IGBleHBpcmVzPSR7ZC50b1VUQ1N0cmluZygpfWA7XHJcbiAgZG9jdW1lbnQuY29va2llID0gYCR7Y25hbWV9PSR7Y3ZhbHVlfTske2V4cGlyZXN9O3BhdGg9L2A7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENvb2tpZShjbmFtZSkge1xyXG4gIGxldCBuYW1lID0gYCR7Y25hbWV9PWA7XHJcbiAgbGV0IGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IGMgPSBjYVtpXTtcclxuICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSB7XHJcbiAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcclxuICAgIH1cclxuICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT09IDApIHtcclxuICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLCBjLmxlbmd0aCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiAnJztcclxufVxyXG5cclxuY29uc3Qgc2hvd0FnZVZlcnlmaWNhdGlvbk1vZGFsID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vIENoZWNrIENvb2tpZVxyXG4gIGlmIChnZXRDb29raWUoJ2FnZU92ZXIxOCcpID09PSAneWVzJykgcmV0dXJuO1xyXG5cclxuICAvLyBDcmVhdGluZyAmIEFkZCBtb2RhbFxyXG4gIGNvbnN0IG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgY29uc3QgbW9kYWxIVE1MID0gYDxkaXYgY2xhc3M9XCJtb2RhbC1hZ2VcIj5cclxuPGRpdiBjbGFzcz1cIm1vZGFsLWFnZV9fY29udGVudFwiPlxyXG4gICAgPGltZyBjbGFzcz1cIm1vZGFsLWFnZV9fbG9nb1wiIHNyYz1cIi4vaW1nL3RlbnZhcGUtbG9nby10ZXh0LnBuZ1wiIGFsdD1cIlwiPlxyXG4gICAgPHAgY2xhc3M9XCJtb2RhbC1hZ2VfX3RleHRcIj5DenkgbWFzeiBza2/FhGN6b25lIDE4IGxhdD88L3A+XHJcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYWdlX19idG5zXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tLWNvbmZpcm1cIj5UYWs8L2J1dHRvbj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0tZGVuaWVkXCI+TmllPC9idXR0b24+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxwIGNsYXNzPVwibW9kYWwtYWdlX190ZXh0LXNtYWxsXCI+V2Nob2R6xIVjIG5hIHN0cm9uxJkgbmFzemVnbyBza2xlcHUgcG90d2llcmR6YXN6LCDFvGUgamVzdGXFmyBvc29ixIVcclxuICAgICAgICBwZcWCbm9sZXRuacSFLjwvcD5cclxuPC9kaXY+XHJcbjwvZGl2PmA7XHJcblxyXG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICBtb2RhbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtb2RhbC1jb250YWluZXInKTtcclxuICBtb2RhbENvbnRhaW5lci5pbm5lckhUTUwgPSBtb2RhbEhUTUw7XHJcblxyXG4gIC8vIE1vZGFsIGJlaGF2aW9yXHJcbiAgY29uc3QgYnRuQ29uZmlybUFnZSA9IG1vZGFsQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5idG4tLWNvbmZpcm0nKTtcclxuICBjb25zdCBidG5EZW5pZWRBZ2UgPSBtb2RhbENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYnRuLS1kZW5pZWQnKTtcclxuXHJcbiAgYnRuQ29uZmlybUFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHNldENvb2tpZSgnYWdlT3ZlcjE4JywgJ3llcycsIDcpO1xyXG4gICAgbW9kYWxDb250YWluZXIuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGJ0bkNvbmZpcm1BZ2UuY2xvc2VzdCgnLm1vZGFsLWNvbnRhaW5lcicpLnJlbW92ZSgpO1xyXG4gICAgfSwgMTAwMCk7XHJcbiAgfSk7XHJcblxyXG4gIGJ0bkRlbmllZEFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5wbCc7XHJcbiAgfSk7XHJcblxyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kKG1vZGFsQ29udGFpbmVyKTtcclxufTtcclxuXHJcbmNvbnN0IGNvb2tpZXNNb2RhbCA9IGZ1bmN0aW9uICgpIHtcclxuICAvLyBDaGVjayBjb29raWVzXHJcbiAgaWYgKGdldENvb2tpZSgnY29va2llcycpID09PSAneWVzJykgcmV0dXJuO1xyXG5cclxuICAvLyBDcmVhdGUgbW9kYWxcclxuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC1jb29raWVzJyk7XHJcbiAgbW9kYWwuaW5uZXJIVE1MID0gYDxwIGNsYXNzPVwibW9kYWwtY29va2llc19fdGV4dFwiPlRhIHN0cm9uYSB3eWtvcnp5c3R1amUgcGxpa2kgY29va2llLiBVxbx5d2FteSBpbmZvcm1hY2ppIHphcGlzYW55Y2ggemEgcG9tb2PEhVxyXG4gIHBsaWvDs3cgY29va2llcyB3IGNlbHUgemFwZXduaWVuaWEgbWFrc3ltYWxuZWogd3lnb2R5IHcga29yenlzdGFuaXUgeiBuYXN6ZWdvIHNlcndpc3UuPC9wPjxidXR0b24gY2xhc3M9XCJtb2RhbC1jb29raWVzX19idG4gYnRuIGJ0bi0tY29uZmlybVwiPkFrY2VwdHVqxJk8L2J1dHRvbj5gO1xyXG5cclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZChtb2RhbCk7XHJcblxyXG4gIC8vIE1vZGFsIEJlaGF2aW9yXHJcbiAgY29uc3QgYnRuID0gbW9kYWwucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7XHJcblxyXG4gIGNvbnN0IGFjY2VwdENvb2tpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBzZXRDb29raWUoJ2Nvb2tpZXMnLCAneWVzJywgMzY1KTtcclxuICAgIG1vZGFsLnJlbW92ZSgpO1xyXG4gIH07XHJcblxyXG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFjY2VwdENvb2tpZXMpO1xyXG59O1xyXG4vLyBOYXZpZ2F0aW9uIGhhbmRsaW5nO1xyXG5jb25zdCBtb2JpbGVOYXZpZ2F0aW9uSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBoYW1idXJnZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW1idXJnZXInKTtcclxuICBjb25zdCBuYXZiYXJNZW51RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyX19tZW51Jyk7XHJcblxyXG4gIGNvbnN0IG1vYmlsZU1lbnVIYW5kbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBuYXZiYXJNZW51RWwuY2xhc3NMaXN0LnRvZ2dsZSgnbmF2YmFyX19tZW51LS1hY3RpdmUnKTtcclxuICAgIGhhbWJ1cmdlckVsLmNsYXNzTGlzdC50b2dnbGUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgaWYgKG5hdmJhck1lbnVFbC5jbGFzc0xpc3QuY29udGFpbnMoJ25hdmJhcl9fbWVudS0tYWN0aXZlJykpIHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBoYW1idXJnZXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1vYmlsZU1lbnVIYW5kbGUpO1xyXG59O1xyXG5cclxuLy8gRGlzcGxheSBmb290ZXIgeWVhclxyXG5jb25zdCBkaXNwbGF5Rm9vdGVyWWVhciA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCB5ZWFyU3BhbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfX3llYXInKTtcclxuICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgeWVhclNwYW4udGV4dENvbnRlbnQgPSBjdXJyZW50WWVhcjtcclxufTtcclxuXHJcbi8vIEZhY2Vib29rIG1lc3NlbmdlclxyXG5jb25zdCBmYWNlYm9va01lc3NlbmdlciA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBjaGF0Ym94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZiLWN1c3RvbWVyLWNoYXQnKTtcclxuICBjaGF0Ym94LnNldEF0dHJpYnV0ZSgncGFnZV9pZCcsICcxMDk3NjMyMDUxMzY2MzcnKTtcclxuICBjaGF0Ym94LnNldEF0dHJpYnV0ZSgnYXR0cmlidXRpb24nLCAnYml6X2luYm94Jyk7XHJcblxyXG4gIHdpbmRvdy5mYkFzeW5jSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIEZCLmluaXQoe1xyXG4gICAgICB4ZmJtbDogdHJ1ZSxcclxuICAgICAgdmVyc2lvbjogJ3YxNi4wJyxcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIChmdW5jdGlvbiAoZCwgcywgaWQpIHtcclxuICAgIGxldCBqcztcclxuICAgIGNvbnN0IGZqcyA9IGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF07XHJcbiAgICBpZiAoZC5nZXRFbGVtZW50QnlJZChpZCkpIHJldHVybjtcclxuICAgIGpzID0gZC5jcmVhdGVFbGVtZW50KHMpO1xyXG4gICAganMuaWQgPSBpZDtcclxuICAgIGpzLnNyYyA9ICdodHRwczovL2Nvbm5lY3QuZmFjZWJvb2submV0L3BsX1BML3Nkay94ZmJtbC5jdXN0b21lcmNoYXQuanMnO1xyXG4gICAgZmpzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGpzLCBmanMpO1xyXG4gIH0pKGRvY3VtZW50LCAnc2NyaXB0JywgJ2ZhY2Vib29rLWpzc2RrJyk7XHJcbn07XHJcblxyXG4vLyBTY3JvbGwgdG8gVG9wXHJcbmNvbnN0IHNjcm9sbFRvVG9wID0gZnVuY3Rpb24gKCkge1xyXG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG5fX3Njcm9sbC10by10b3AnKTtcclxuICBjb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlcicpO1xyXG5cclxuICBjb25zdCBzaG93QnRuID0gZnVuY3Rpb24gKGVudHJpZXMpIHtcclxuICAgIGNvbnN0IFtlbnRyeV0gPSBlbnRyaWVzO1xyXG5cclxuICAgIGlmICghZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNjcmVlbk9ic2VydmUgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoc2hvd0J0biwge1xyXG4gICAgcm9vdDogbnVsbCxcclxuICAgIHRocmVzaG9sZDogMC4zLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBzY3JvbGxUb1RvcEhhbmRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUbyh7IHRvcDogMCB9KTtcclxuICB9O1xyXG5cclxuICBzY3JlZW5PYnNlcnZlLm9ic2VydmUobWFpbkNvbnRlbnQpO1xyXG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNjcm9sbFRvVG9wSGFuZGxlKTtcclxufTtcclxuXHJcbi8vIEZ1bmN0aW9ucyBmb3IgdGhpcyBwYXJ0aWN1cmFsIHBhZ2VcclxuXHJcbi8vIEdsb2JhbCBWYXJpYWJsZSB1c2VkIGluIGZ1bmN0aW9uczogQ2F0ZWdvcnlTbGlkZXIgYW5kIHNjcm9sbFRvQ2F0ZWdvcnlcclxuY29uc3QgbW9iaWxlU2NyZWVuID0gd2luZG93LmlubmVyV2lkdGggPCA3Njg7XHJcblxyXG4vLyAhIENhdGVnb3J5IHNsaWRlXHJcblxyXG5jb25zdCBjYXRlZ29yeVNsaWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBjYXRlZ29yeUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzX19jb250ZW50Jyk7XHJcbiAgY29uc3QgY2F0ZWdvcnlJdGVtcyA9IGNhdGVnb3J5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRlZ29yeScpO1xyXG4gIGNvbnN0IGNhdGVnb3J5QmFySGVpZ2h0ID0gMTUwO1xyXG5cclxuICBjb25zdCByZW1vdmVBY3RpdmVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNhdGVnb3J5SXRlbXMuZm9yRWFjaCgoY2F0KSA9PiB7XHJcbiAgICAgIGNhdC5jbGFzc0xpc3QucmVtb3ZlKCdjYXRlZ29yeS0tYWN0aXZlJyk7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICBpZiAobW9iaWxlU2NyZWVuKSBjYXQuc3R5bGUubWF4SGVpZ2h0ID0gYCR7Y2F0ZWdvcnlCYXJIZWlnaHR9cHhgO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY2F0ZWdvcnlDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgY29uc3QgY2F0ZWdvcnlUYXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcuY2F0ZWdvcnknKTtcclxuXHJcbiAgICByZW1vdmVBY3RpdmVDbGFzcygpO1xyXG5cclxuICAgIGlmIChjYXRlZ29yeVRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhdGVnb3J5LS1hY3RpdmUnKSAmJiBtb2JpbGVTY3JlZW4pIHtcclxuICAgICAgY2F0ZWdvcnlUYXJnZXQuc3R5bGUubWF4SGVpZ2h0ID0gYCR7Y2F0ZWdvcnlCYXJIZWlnaHR9cHhgO1xyXG4gICAgICBjYXRlZ29yeVRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdjYXRlZ29yeS0tYWN0aXZlJyk7XHJcbiAgICB9IGVsc2UgaWYgKGNhdGVnb3J5VGFyZ2V0KSB7XHJcbiAgICAgIGNhdGVnb3J5VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2NhdGVnb3J5LS1hY3RpdmUnKTtcclxuICAgICAgaWYgKG1vYmlsZVNjcmVlbilcclxuICAgICAgICBjYXRlZ29yeVRhcmdldC5zdHlsZS5tYXhIZWlnaHQgPSBgJHtjYXRlZ29yeVRhcmdldC5zY3JvbGxIZWlnaHR9cHhgO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGlmICghZS50YXJnZXQ/LmNsb3Nlc3QoJy5jYXRlZ29yaWVzX19jb250ZW50JykpIHtcclxuICAgICAgcmVtb3ZlQWN0aXZlQ2xhc3MoKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbi8vICEgIFNjcm9sbCB0byBwcm9kdWN0cyBjbGlja2luZyBieSBidXR0b24gb24gc3BlY2lmaWVkIGNhdGVnb3J5XHJcblxyXG5jb25zdCBzY3JvbGxUb0NhdGVnb3J5T2ZQcm9kdWN0cyA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBwcm9kdWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0cycpO1xyXG4gIGNvbnN0IGNhdExpbmtzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXMnKTtcclxuXHJcbiAgY2F0TGlua3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2F0ZWdvcnlfX2J0bicpKSB7XHJcbiAgICAgIGNvbnN0IHsgY2F0ZWdvcnkgfSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5jYXRlZ29yeScpLmRhdGFzZXQ7XHJcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBwcm9kdWN0c0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIGBbZGF0YS1jYXRlZ29yeT1cIiR7Y2F0ZWdvcnl9XCJdYFxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBuYXZIZWlnaHQgPSBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJylcclxuICAgICAgICAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG5cclxuICAgICAgd2luZG93LnNjcm9sbFRvKHtcclxuICAgICAgICB0b3A6IHNlY3Rpb24ub2Zmc2V0VG9wIC0gK25hdkhlaWdodCxcclxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCcsXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gISBTZWN0aW9uIEFuaW1hdGlvblxyXG5cclxuY29uc3Qgc2VjdGlvbkFuaW1hdGlvbkhhbmRsZSA9IGZ1bmN0aW9uICgpIHtcclxuICBpZiAobW9iaWxlU2NyZWVuKSByZXR1cm47XHJcbiAgY29uc3QgY2F0ZWdvcmllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzJyk7XHJcbiAgY29uc3QgcHJvZHVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdHNfX2NhdGVnb3J5Jyk7XHJcblxyXG4gIGNvbnN0IHNob3dDYXRlZ29yaWVzID0gZnVuY3Rpb24gKGVudHJpZXMsIG9ic2VydmVyKSB7XHJcbiAgICBjb25zdCBbZW50cnldID0gZW50cmllcztcclxuXHJcbiAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcclxuICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NlY3Rpb24tLWFuaW1lJyk7XHJcbiAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNob3dQcm9kdWN0cyA9IGZ1bmN0aW9uIChlbnRyaWVzLCBvYnNlcnZlcikge1xyXG4gICAgY29uc3QgW2VudHJ5XSA9IGVudHJpZXM7XHJcblxyXG4gICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XHJcbiAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdzZWN0aW9uLS1oaWRkZW4nKTtcclxuICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgY2F0T3B0aW9ucyA9IHtcclxuICAgIHJvb3Q6IG51bGwsXHJcbiAgICByb290TWFyZ2luOiAnMHB4JyxcclxuICAgIHRocmVzaG9sZDogMC40NSxcclxuICB9O1xyXG4gIGNvbnN0IHByb09wdGlvbnMgPSB7XHJcbiAgICByb290OiBudWxsLFxyXG4gICAgcm9vdE1hcmdpbjogJzBweCcsXHJcbiAgICB0aHJlc2hvbGQ6IDAuMTUsXHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgb2JzZXJ2ZUNhdGVnb3JpZXMgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXHJcbiAgICBzaG93Q2F0ZWdvcmllcyxcclxuICAgIGNhdE9wdGlvbnNcclxuICApO1xyXG4gIGNvbnN0IG9ic2VydmVQcm9kdWN0cyA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihzaG93UHJvZHVjdHMsIHByb09wdGlvbnMpO1xyXG5cclxuICBwcm9kdWN0cy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ3NlY3Rpb24tLWhpZGRlbicpO1xyXG4gICAgb2JzZXJ2ZVByb2R1Y3RzLm9ic2VydmUoc2VjdGlvbik7XHJcbiAgfSk7XHJcbiAgb2JzZXJ2ZUNhdGVnb3JpZXMub2JzZXJ2ZShjYXRlZ29yaWVzKTtcclxufTtcclxuXHJcbmNvbnN0IGNhcmRIb3Zlck1vYmlsZSA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBtb2JpbGVBbmRUYWJsZXRDaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBjaGVjayA9IGZhbHNlO1xyXG4gICAgKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2kudGVzdChcclxuICAgICAgICAgIGFcclxuICAgICAgICApIHx8XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtZXNjYXBlXHJcbiAgICAgICAgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChcclxuICAgICAgICAgIGEuc3Vic3RyKDAsIDQpXHJcbiAgICAgICAgKVxyXG4gICAgICApXHJcbiAgICAgICAgY2hlY2sgPSB0cnVlO1xyXG4gICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XHJcbiAgICByZXR1cm4gY2hlY2s7XHJcbiAgfTtcclxuICBpZiAoIW1vYmlsZUFuZFRhYmxldENoZWNrKCkpIHJldHVybjtcclxuXHJcbiAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZCcpO1xyXG5cclxuICBjYXJkcy5mb3JFYWNoKChjYXJkKSA9PiB7XHJcbiAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdCgnLmNhcmQnKTtcclxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vLyBNYWluIGZ1bmN0aW9uc1xyXG5tb2JpbGVOYXZpZ2F0aW9uSGFuZGxlcigpO1xyXG5kaXNwbGF5Rm9vdGVyWWVhcigpO1xyXG5mYWNlYm9va01lc3NlbmdlcigpO1xyXG5zY3JvbGxUb1RvcCgpO1xyXG5zaG93QWdlVmVyeWZpY2F0aW9uTW9kYWwoKTtcclxuY29va2llc01vZGFsKCk7XHJcblxyXG4vLyBGdW5jdGlvbnMgZm9yIHRoaXMgcGFydGljdXJhbCBwYWdlXHJcbmNhdGVnb3J5U2xpZGVyKCk7XHJcbnNjcm9sbFRvQ2F0ZWdvcnlPZlByb2R1Y3RzKCk7XHJcbnNlY3Rpb25BbmltYXRpb25IYW5kbGUoKTtcclxuY2FyZEhvdmVyTW9iaWxlKCk7XHJcbiJdfQ==
